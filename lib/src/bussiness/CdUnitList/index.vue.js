"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("./style/index.css");const T=require("../CdPageList/PageListSimple/index.js"),q=require("../../basic/CdModal/index.js"),A=require("../../basic/CdCascader/index.js"),U=require("./UnitForm.vue.js"),F=require("./useTableAction.js"),H=require("./useComputed.js"),P=e.defineComponent({name:"CdUnitList"}),O=e.defineComponent({...P,props:{modelValue:Boolean,equclacode:{type:String,default:""},type:{type:String,default:""},unitType:{type:String,default:""},tableViewNo:{type:String,default:""},tableHeight:{type:String,default:"400"},isAnd:{type:String,default:"0"},showCheckBox:{type:Boolean,default:!1},isSearchOnActive:{type:Boolean,default:!0}},emits:["update:modelValue","on-unit-select","unitform-save"],setup(p,{emit:r}){const o=p,s=e.computed({get:()=>o.modelValue,set:()=>r("update:modelValue")}),i=e.reactive({type:o.type,unitType:o.unitType,complex:"",areacode:"",equclacode:o.equclacode,isAnd:o.isAnd,isUse:"1"}),{useTableViewNo:v,useTitle:V,usePermission:_}=H.default(o),w=v,b=V,m=_;e.provide("computedPermission",m);const d=e.ref(),x=()=>d.value.query();e.provide("queryHandle",x);const l=e.reactive({visible:!1,type:"",basicdatasysid:"",optType:""}),f=a=>{l.visible=!0,l.optType=a.id?"edit":"add",l.basicdatasysid=a.id||"",l.type=o.type},g=()=>{r("unitform-save")},y=a=>{const t=a.id?[a]:d.value.tableOptions.selectedRows;if(t.length===0)return window.$Message.warning("请选择数据");const u=o.showCheckBox?t:a.id?t[0]:t;s.value=!1,r("on-unit-select",u)},S=F.default(o,y,f);return(a,t)=>{const u=e.resolveComponent("Input"),C=e.resolveComponent("Form-item"),c=e.resolveComponent("Col"),k=e.resolveComponent("Row"),h=e.resolveComponent("Button"),B=e.resolveDirective("hasPermission");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(q.CdModal),{class:"cd-unit-list",modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=n=>s.value=n),title:e.unref(b),size:"large","footer-hide":!0},{default:e.withCtx(()=>[e.createVNode(e.unref(T.CdPageListSimple),{ref_key:"pageListSimpleRef",ref:d,url:"/api/common/getUnitList",isSearchOnActive:o.isSearchOnActive,tableViewNo:e.unref(w),isColFix:!1,tableAction:e.unref(S),searchForm:i,showCheckBox:o.showCheckBox,fixedHeight:o.tableHeight},{search:e.withCtx(()=>[e.createVNode(k,null,{default:e.withCtx(()=>[e.createVNode(c,{span:"8"},{default:e.withCtx(()=>[e.createVNode(C,{label:"综合查询","label-width":80,prop:"complex"},{default:e.withCtx(()=>[e.createVNode(u,{modelValue:i.complex,"onUpdate:modelValue":t[0]||(t[0]=n=>i.complex=n),placeholder:"输入单位名称、组织机构代码、法定代表人"},null,8,["modelValue"])]),_:1})]),_:1}),e.createVNode(c,{span:"8"},{default:e.withCtx(()=>[e.createVNode(C,{label:"所在地区","label-width":80,prop:"areacode"},{default:e.withCtx(()=>[e.createVNode(e.unref(A.CdCascader),{ref:"areacodeCascader",modelValue:i.areacode,"onUpdate:modelValue":t[1]||(t[1]=n=>i.areacode=n),type:"sys_area","p-val":"000000"},null,8,["modelValue"])]),_:1})]),_:1}),e.renderSlot(a.$slots,"cusSearchItems",{searchForm:i})]),_:3})]),function:e.withCtx(()=>[e.createVNode(c,{class:"table-btnbar-left",span:"18"},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(h,{type:"primary",onClick:f},{default:e.withCtx(()=>[e.createTextVNode(" 新增 ")]),_:1})),[[B,e.unref(m)]]),p.showCheckBox?(e.openBlock(),e.createBlock(h,{key:0,type:"primary",onClick:y},{default:e.withCtx(()=>[e.createTextVNode(" 确认选择 ")]),_:1})):e.createCommentVNode("",!0)]),_:1})]),_:3},8,["isSearchOnActive","tableViewNo","tableAction","searchForm","showCheckBox","fixedHeight"])]),_:3},8,["modelValue","title"]),l.visible?(e.openBlock(),e.createBlock(U.default,{key:0,modelValue:l.visible,"onUpdate:modelValue":t[3]||(t[3]=n=>l.visible=n),id:l.basicdatasysid,optType:l.optType,type:l.type,onUnitformSave:g},{default:e.withCtx(({formProps:n,afterSave:N})=>[e.renderSlot(a.$slots,"unitform",{formProps:n,afterSave:N})]),_:3},8,["modelValue","id","optType","type"])):e.createCommentVNode("",!0)],64)}}});exports.default=O;
