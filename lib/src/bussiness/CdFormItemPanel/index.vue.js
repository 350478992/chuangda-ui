"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("./style/index.css");const g=require("@/config"),k=require("../CdFormField/index.js"),f=require("@/common/const"),E={class:"form-box"},_={class:"group-box"},z={class:"font-700"},O=e.defineComponent({name:"CdFormItemPanel"}),T=e.defineComponent({...O,props:{formItemConfig:{type:Object,default:()=>f.defaultFormItemConfig},size:{type:String,default:g.defaultFormSize||"default"},noShowFieldControl:{type:Array,default:()=>[]},readOnly:{type:Boolean,default:!1},showRequired:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},name:{type:String,required:!0},viewNo:{type:String,required:!0},attrPrefix:{type:String,default:""},formObject:{type:Object,required:!0},ruleValidate:{type:Object,default:()=>({})},slots:{type:Array,default:()=>[]},fullItemKeys:{type:Array,default:()=>[]},defaultClosePanels:{type:Array,default:()=>[]}},emits:["renderPercentPath"],setup(r,{emit:q}){const d=r,u=e.ref(g.showSubformPanelProp),B=e.ref(1),V=e.ref(!1),h=e.ref([]),l=e.ref(f.defaultFormItemConfig);e.watch(()=>d.formItemConfig,t=>{y()});const y=async()=>{const{formItemConfig:t}=d;t!=null&&t.formcol&&(t.formcol=parseInt(String(t.formcol))),l.value=t||f.defaultFormItemConfig,w(t==null?void 0:t.columns),b(t==null?void 0:t.groups)},w=(t=[])=>{t.length>0&&t.forEach(n=>S(n))},b=(t=[])=>{t.length>0&&t.forEach((n,i)=>{var s;w((n==null?void 0:n.columns)??[]),(s=d.defaultClosePanels)!=null&&s.includes(i)||h.value.push(`${i}`)}),l.value.groups=t},S=t=>{const{compLength:n,dictType:i,dictParentId:s,dictParentValue:p}=t;t.viewId=l.value.id,t.compLength=n?`${n}px`:"100%",t.dictConf={type:i||"",parentId:s||"",parentValue:p||""},t.colWidth=t.isLine==="1"?24:24/l.value.formcol},C=t=>{if(d.showRequired)return{required:t.isNull==="1",message:"请填写"+t.comments,trigger:"blur"}},x=t=>{var n;return t.colWidth===24?t.showType==="textarea"?"width:98%;":(n=d.fullItemKeys)!=null&&n.includes(t.name)?"width:100%;":`width:${1/l.value.formcol*100}%;`:"width: 100%;"};return e.onMounted(()=>{d.viewNo&&l.value.columns.length===0&&y()}),(t,n)=>{const i=e.resolveComponent("Progress"),s=e.resolveComponent("Form-item"),p=e.resolveComponent("Col"),v=e.resolveComponent("Row"),N=e.resolveComponent("Panel"),F=e.resolveComponent("Collapse");return e.openBlock(),e.createElementBlock("div",E,[e.withDirectives(e.createVNode(i,{percent:B.value,"hide-info":""},null,8,["percent"]),[[e.vShow,V.value]]),e.createVNode(v,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value.columns,o=>e.withDirectives((e.openBlock(),e.createBlock(p,{span:o.colWidth,key:o.id},{default:e.withCtx(()=>[e.createVNode(s,{rules:C(o),style:e.normalizeStyle(o.colWidth==24&&o.showType=="textarea"?"width:98%;":""),label:o.comments,"label-width":200,prop:o.name},{default:e.withCtx(()=>[e.createElementVNode("span",{slot:"label",class:e.normalizeClass(o.styleName)},e.toDisplayString(o.comments),3),o.showType!=="hidden"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(u.value?`${o.name},${o.dbName}`:""),1)],64)):e.createCommentVNode("",!0),e.createVNode(e.unref(k.CdFormField),{modelValue:r.formObject[r.attrPrefix+o.name],"onUpdate:modelValue":c=>r.formObject[r.attrPrefix+o.name]=c,type:o.showType,size:r.size,name:o.name,prop:o.name,disabled:o.isReadonly==="1",readonly:o.isReadonly==="1"||r.readOnly,width:o.compLength,dictConf:o.dictConf},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.slots,(c,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[o.name==c?(e.openBlock(),e.createElementBlock("div",{key:a},[e.renderSlot(t.$slots,c)])):e.createCommentVNode("",!0)],64))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","type","size","name","prop","disabled","readonly","width","dictConf"])]),_:2},1032,["rules","style","label","prop"])]),_:2},1032,["span"])),[[e.vShow,o.showType!=="hidden"]])),128))]),_:3}),e.createElementVNode("div",_,[e.createVNode(F,{"model-value":h.value},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value.groups,(o,c)=>(e.openBlock(),e.createBlock(N,{name:`${c}`,key:o.id},{content:e.withCtx(()=>[e.createVNode(v,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.columns,a=>e.withDirectives((e.openBlock(),e.createBlock(p,{span:a.colWidth,key:a.id},{default:e.withCtx(()=>[r.noShowFieldControl.indexOf(a.name)==-1?(e.openBlock(),e.createBlock(s,{key:0,rules:C(a),style:e.normalizeStyle(x(a)),"label-width":200,prop:a.name},{label:e.withCtx(()=>[e.createElementVNode("span",{class:e.normalizeClass(a.styleName)},e.toDisplayString(a.comments),3)]),default:e.withCtx(()=>[a.showType!=="hidden"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(u.value?a.name:""),1)],64)):e.createCommentVNode("",!0),e.createVNode(e.unref(k.CdFormField),{modelValue:r.formObject[a.name],"onUpdate:modelValue":m=>r.formObject[a.name]=m,type:a.showType,size:r.size,name:a.name,prop:a.name,readonly:a.isReadonly==="1"||r.readOnly,disabled:a.isReadonly==="1",width:a.compLength,dictConf:a.dictConf,dictData:a.dictData},e.createSlots({_:2},[e.renderList(d.slots,(m,P)=>({name:m,fn:e.withCtx(()=>[a.name==m?(e.openBlock(),e.createElementBlock("div",{key:P},[e.renderSlot(t.$slots,m)])):e.createCommentVNode("",!0)])}))]),1032,["modelValue","onUpdate:modelValue","type","size","name","prop","readonly","disabled","width","dictConf","dictData"])]),_:2},1032,["rules","style","prop"])):e.createCommentVNode("",!0)]),_:2},1032,["span"])),[[e.vShow,a.showType!=="hidden"]])),128))]),_:2},1024)]),default:e.withCtx(()=>[e.createElementVNode("span",z,e.toDisplayString(o.name),1)]),_:2},1032,["name"]))),128))]),_:3},8,["model-value"])])])}}});exports.default=T;
