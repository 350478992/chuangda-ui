"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("./style/index.css");const V=require("@/api/system"),b=e.defineComponent({name:"CdCheckboxGroup"}),v=e.defineComponent({...b,props:{modelValue:{type:[String,Array],default:""},list:{type:Array,default:()=>[]},type:{type:String,default:""},pVal:{type:String,default:""},pId:{type:String,default:"-1"},size:{type:String,default:"default"}},emits:["update:modelValue","on-change"],setup(d,{emit:u}){const n=d,r=e.ref([]);e.watch(()=>n.list,()=>{c()});const i=e.computed({get:()=>{const t=Object.prototype.toString.call(n.modelValue);if(t.includes("Array"))return n.modelValue;if(t.includes("String"))return n.modelValue.split(",").filter(l=>l!=="")},set:t=>{u("update:modelValue",t)}});e.onMounted(()=>{c()});const c=async()=>{const{type:t,pId:l,pVal:s,list:o}=n;if(o!=null&&o.length)r.value=o;else if(t){const a=await V.apiFindDictList({type:t,parentId:l,parentValue:s}),{isSuccess:f,errorMsg:m,errmsg:g,data:y}=a||{};f?r.value=y:window.$Message.error(m||g)}else r.value=o||[]},p=t=>{const l=t.join();u("update:modelValue",l);const s=r.value.filter(o=>t.includes(o.value));u("on-change",l,s)};return(t,l)=>{const s=e.resolveComponent("Checkbox"),o=e.resolveComponent("CheckboxGroup");return e.openBlock(),e.createBlock(o,e.mergeProps({modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a),size:d.size},t.$attrs,{onOnChange:p}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,a=>(e.openBlock(),e.createBlock(s,{label:a.value,disabled:t.$attrs.disabled||a.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.label),1)]),_:2},1032,["label","disabled"]))),256))]),_:1},16,["modelValue","size"])}}});exports.default=v;
