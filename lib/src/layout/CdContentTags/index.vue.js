"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("./style/index.css");const _=require("vue-router"),y={class:"cd-tag-wrap"},B={class:"close-box"},D=e.defineComponent({name:"CdContentTags"}),M=e.defineComponent({...D,setup(V){const w=_.useRoute(),i=_.useRouter(),g=e.inject("$config"),a=e.inject("appStore");let r=e.ref(a.navTags),c=e.ref(w.name);e.watch(()=>i.currentRoute.value,t=>{var o;c.value=t.name,a.handleNavTagsAdd({name:t.name,title:(o=t.meta)==null?void 0:o.title}),r.value=a.navTags}),e.watch(()=>a.navTags,()=>{r.value=a.navTags});const v=(t,o)=>{if(t.name!=="home"&&(r.value=a.handleNavTagsClose([t.name],"sigleclose"),c.value===t.name)){const l=r.value[o-1];c.value=l.name,i.push({name:l.name})}},k=(t,o,l)=>{t.detail===2&&g.tagNavDblClickClose?v(o,l):i.push({name:o.name})},N=t=>{const o=t==="close-all",l=o?["home"]:["home",c.value];r.value=a.handleNavTagsClose(l,"batchcolse"),o&&(c.value="home",i.push({name:"home"}))},p=e.ref(),f=e.ref(),h=t=>{const{type:o,detail:l,wheelDelta:d}=t;let u=0;(o==="DOMMouseScroll"||o==="mousewheel")&&(u=d||-(l||0)*40),m(u)},n=e.ref(0),m=t=>{const o=p.value.offsetWidth,l=f.value.offsetWidth;t>0?n.value=Math.min(0,n.value+t):o<l?n.value<-(l-o+8)?n.value=n.value:n.value=Math.max(n.value+t-8,o-l-8):n.value=0};return(t,o)=>{const l=e.resolveComponent("Button"),d=e.resolveComponent("Tag"),u=e.resolveComponent("DropdownItem"),b=e.resolveComponent("DropdownMenu"),x=e.resolveComponent("Dropdown");return e.openBlock(),e.createElementBlock("div",y,[e.createVNode(l,{class:"arrow-btn arrow-btn-left",icon:"ios-arrow-back",onClick:o[0]||(o[0]=s=>m(240))}),e.createVNode(l,{class:"arrow-btn arrow-btn-right",icon:"ios-arrow-forward",onClick:o[1]||(o[1]=s=>m(-240))}),e.createElementVNode("div",{class:"scroll-box",ref_key:"scrollBox",ref:p,"on:DOMMouseScroll":h,onMousewheel:h},[e.createElementVNode("div",{class:"scroll-body",ref_key:"scrollBody",ref:f,style:e.normalizeStyle({marginLeft:n.value+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(s,C)=>(e.openBlock(),e.createBlock(d,{class:"scroll-box-tag",type:"dot",closable:"",color:e.unref(c)===s.name?"primary":"",key:s.name,onOnClose:()=>v(s,C),onClick:T=>k(T,s,C)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.title),1)]),_:2},1032,["color","onOnClose","onClick"]))),128))],4)],544),e.createElementVNode("div",B,[e.createVNode(x,{transfer:"",onOnClick:N},{list:e.withCtx(()=>[e.createVNode(b,null,{default:e.withCtx(()=>[e.createVNode(u,{name:"close-all"},{default:e.withCtx(()=>[e.createTextVNode("关闭所有")]),_:1}),e.createVNode(u,{name:"close-others"},{default:e.withCtx(()=>[e.createTextVNode("关闭其他")]),_:1})]),_:1})]),default:e.withCtx(()=>[e.createVNode(l,{class:"close-box-btn",icon:"ios-close-circle-outline"})]),_:1})])])}}});exports.default=M;
